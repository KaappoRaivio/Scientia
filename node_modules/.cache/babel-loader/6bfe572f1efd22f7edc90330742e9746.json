{"ast":null,"code":"import { isMatrix, isRange } from '../../utils/is';\nimport { clone } from '../../utils/object';\nimport { isInteger } from '../../utils/number';\nimport { factory } from '../../utils/factory';\nvar name = 'Index';\nvar dependencies = ['ImmutableDenseMatrix'];\nexport var createIndexClass = /* #__PURE__ */factory(name, dependencies, function (_ref) {\n  var ImmutableDenseMatrix = _ref.ImmutableDenseMatrix;\n  /**\n   * Create an index. An Index can store ranges and sets for multiple dimensions.\n   * Matrix.get, Matrix.set, and math.subset accept an Index as input.\n   *\n   * Usage:\n   *     const index = new Index(range1, range2, matrix1, array1, ...)\n   *\n   * Where each parameter can be any of:\n   *     A number\n   *     A string (containing a name of an object property)\n   *     An instance of Range\n   *     An Array with the Set values\n   *     A Matrix with the Set values\n   *\n   * The parameters start, end, and step must be integer numbers.\n   *\n   * @class Index\n   * @Constructor Index\n   * @param {...*} ranges\n   */\n\n  function Index(ranges) {\n    if (!(this instanceof Index)) {\n      throw new SyntaxError('Constructor must be called with the new operator');\n    }\n\n    this._dimensions = [];\n    this._isScalar = true;\n\n    for (var i = 0, ii = arguments.length; i < ii; i++) {\n      var arg = arguments[i];\n\n      if (isRange(arg)) {\n        this._dimensions.push(arg);\n\n        this._isScalar = false;\n      } else if (Array.isArray(arg) || isMatrix(arg)) {\n        // create matrix\n        var m = _createImmutableMatrix(arg.valueOf());\n\n        this._dimensions.push(m); // size\n\n\n        var size = m.size(); // scalar\n\n        if (size.length !== 1 || size[0] !== 1) {\n          this._isScalar = false;\n        }\n      } else if (typeof arg === 'number') {\n        this._dimensions.push(_createImmutableMatrix([arg]));\n      } else if (typeof arg === 'string') {\n        // object property (arguments.count should be 1)\n        this._dimensions.push(arg);\n      } else {\n        throw new TypeError('Dimension must be an Array, Matrix, number, string, or Range');\n      } // TODO: implement support for wildcard '*'\n\n    }\n  }\n  /**\n   * Attach type information\n   */\n\n\n  Index.prototype.type = 'Index';\n  Index.prototype.isIndex = true;\n\n  function _createImmutableMatrix(arg) {\n    // loop array elements\n    for (var i = 0, l = arg.length; i < l; i++) {\n      if (typeof arg[i] !== 'number' || !isInteger(arg[i])) {\n        throw new TypeError('Index parameters must be positive integer numbers');\n      }\n    } // create matrix\n\n\n    return new ImmutableDenseMatrix(arg);\n  }\n  /**\n   * Create a clone of the index\n   * @memberof Index\n   * @return {Index} clone\n   */\n\n\n  Index.prototype.clone = function () {\n    var index = new Index();\n    index._dimensions = clone(this._dimensions);\n    index._isScalar = this._isScalar;\n    return index;\n  };\n  /**\n   * Create an index from an array with ranges/numbers\n   * @memberof Index\n   * @param {Array.<Array | number>} ranges\n   * @return {Index} index\n   * @private\n   */\n\n\n  Index.create = function (ranges) {\n    var index = new Index();\n    Index.apply(index, ranges);\n    return index;\n  };\n  /**\n   * Retrieve the size of the index, the number of elements for each dimension.\n   * @memberof Index\n   * @returns {number[]} size\n   */\n\n\n  Index.prototype.size = function () {\n    var size = [];\n\n    for (var i = 0, ii = this._dimensions.length; i < ii; i++) {\n      var d = this._dimensions[i];\n      size[i] = typeof d === 'string' ? 1 : d.size()[0];\n    }\n\n    return size;\n  };\n  /**\n   * Get the maximum value for each of the indexes ranges.\n   * @memberof Index\n   * @returns {number[]} max\n   */\n\n\n  Index.prototype.max = function () {\n    var values = [];\n\n    for (var i = 0, ii = this._dimensions.length; i < ii; i++) {\n      var range = this._dimensions[i];\n      values[i] = typeof range === 'string' ? range : range.max();\n    }\n\n    return values;\n  };\n  /**\n   * Get the minimum value for each of the indexes ranges.\n   * @memberof Index\n   * @returns {number[]} min\n   */\n\n\n  Index.prototype.min = function () {\n    var values = [];\n\n    for (var i = 0, ii = this._dimensions.length; i < ii; i++) {\n      var range = this._dimensions[i];\n      values[i] = typeof range === 'string' ? range : range.min();\n    }\n\n    return values;\n  };\n  /**\n   * Loop over each of the ranges of the index\n   * @memberof Index\n   * @param {Function} callback   Called for each range with a Range as first\n   *                              argument, the dimension as second, and the\n   *                              index object as third.\n   */\n\n\n  Index.prototype.forEach = function (callback) {\n    for (var i = 0, ii = this._dimensions.length; i < ii; i++) {\n      callback(this._dimensions[i], i, this);\n    }\n  };\n  /**\n   * Retrieve the dimension for the given index\n   * @memberof Index\n   * @param {Number} dim                  Number of the dimension\n   * @returns {Range | null} range\n   */\n\n\n  Index.prototype.dimension = function (dim) {\n    return this._dimensions[dim] || null;\n  };\n  /**\n   * Test whether this index contains an object property\n   * @returns {boolean} Returns true if the index is an object property\n   */\n\n\n  Index.prototype.isObjectProperty = function () {\n    return this._dimensions.length === 1 && typeof this._dimensions[0] === 'string';\n  };\n  /**\n   * Returns the object property name when the Index holds a single object property,\n   * else returns null\n   * @returns {string | null}\n   */\n\n\n  Index.prototype.getObjectProperty = function () {\n    return this.isObjectProperty() ? this._dimensions[0] : null;\n  };\n  /**\n   * Test whether this index contains only a single value.\n   *\n   * This is the case when the index is created with only scalar values as ranges,\n   * not for ranges resolving into a single value.\n   * @memberof Index\n   * @return {boolean} isScalar\n   */\n\n\n  Index.prototype.isScalar = function () {\n    return this._isScalar;\n  };\n  /**\n   * Expand the Index into an array.\n   * For example new Index([0,3], [2,7]) returns [[0,1,2], [2,3,4,5,6]]\n   * @memberof Index\n   * @returns {Array} array\n   */\n\n\n  Index.prototype.toArray = function () {\n    var array = [];\n\n    for (var i = 0, ii = this._dimensions.length; i < ii; i++) {\n      var dimension = this._dimensions[i];\n      array.push(typeof dimension === 'string' ? dimension : dimension.toArray());\n    }\n\n    return array;\n  };\n  /**\n   * Get the primitive value of the Index, a two dimensional array.\n   * Equivalent to Index.toArray().\n   * @memberof Index\n   * @returns {Array} array\n   */\n\n\n  Index.prototype.valueOf = Index.prototype.toArray;\n  /**\n   * Get the string representation of the index, for example '[2:6]' or '[0:2:10, 4:7, [1,2,3]]'\n   * @memberof Index\n   * @returns {String} str\n   */\n\n  Index.prototype.toString = function () {\n    var strings = [];\n\n    for (var i = 0, ii = this._dimensions.length; i < ii; i++) {\n      var dimension = this._dimensions[i];\n\n      if (typeof dimension === 'string') {\n        strings.push(JSON.stringify(dimension));\n      } else {\n        strings.push(dimension.toString());\n      }\n    }\n\n    return '[' + strings.join(', ') + ']';\n  };\n  /**\n   * Get a JSON representation of the Index\n   * @memberof Index\n   * @returns {Object} Returns a JSON object structured as:\n   *                   `{\"mathjs\": \"Index\", \"ranges\": [{\"mathjs\": \"Range\", start: 0, end: 10, step:1}, ...]}`\n   */\n\n\n  Index.prototype.toJSON = function () {\n    return {\n      mathjs: 'Index',\n      dimensions: this._dimensions\n    };\n  };\n  /**\n   * Instantiate an Index from a JSON object\n   * @memberof Index\n   * @param {Object} json A JSON object structured as:\n   *                     `{\"mathjs\": \"Index\", \"dimensions\": [{\"mathjs\": \"Range\", start: 0, end: 10, step:1}, ...]}`\n   * @return {Index}\n   */\n\n\n  Index.fromJSON = function (json) {\n    return Index.create(json.dimensions);\n  };\n\n  return Index;\n}, {\n  isClass: true\n});","map":{"version":3,"sources":["/home/kaappo/testit/canvas/node_modules/mathjs/es/type/matrix/MatrixIndex.js"],"names":["isMatrix","isRange","clone","isInteger","factory","name","dependencies","createIndexClass","_ref","ImmutableDenseMatrix","Index","ranges","SyntaxError","_dimensions","_isScalar","i","ii","arguments","length","arg","push","Array","isArray","m","_createImmutableMatrix","valueOf","size","TypeError","prototype","type","isIndex","l","index","create","apply","d","max","values","range","min","forEach","callback","dimension","dim","isObjectProperty","getObjectProperty","isScalar","toArray","array","toString","strings","JSON","stringify","join","toJSON","mathjs","dimensions","fromJSON","json","isClass"],"mappings":"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","sourcesContent":["import { isMatrix, isRange } from '../../utils/is';\nimport { clone } from '../../utils/object';\nimport { isInteger } from '../../utils/number';\nimport { factory } from '../../utils/factory';\nvar name = 'Index';\nvar dependencies = ['ImmutableDenseMatrix'];\nexport var createIndexClass = /* #__PURE__ */factory(name, dependencies, function (_ref) {\n  var ImmutableDenseMatrix = _ref.ImmutableDenseMatrix;\n\n  /**\n   * Create an index. An Index can store ranges and sets for multiple dimensions.\n   * Matrix.get, Matrix.set, and math.subset accept an Index as input.\n   *\n   * Usage:\n   *     const index = new Index(range1, range2, matrix1, array1, ...)\n   *\n   * Where each parameter can be any of:\n   *     A number\n   *     A string (containing a name of an object property)\n   *     An instance of Range\n   *     An Array with the Set values\n   *     A Matrix with the Set values\n   *\n   * The parameters start, end, and step must be integer numbers.\n   *\n   * @class Index\n   * @Constructor Index\n   * @param {...*} ranges\n   */\n  function Index(ranges) {\n    if (!(this instanceof Index)) {\n      throw new SyntaxError('Constructor must be called with the new operator');\n    }\n\n    this._dimensions = [];\n    this._isScalar = true;\n\n    for (var i = 0, ii = arguments.length; i < ii; i++) {\n      var arg = arguments[i];\n\n      if (isRange(arg)) {\n        this._dimensions.push(arg);\n\n        this._isScalar = false;\n      } else if (Array.isArray(arg) || isMatrix(arg)) {\n        // create matrix\n        var m = _createImmutableMatrix(arg.valueOf());\n\n        this._dimensions.push(m); // size\n\n\n        var size = m.size(); // scalar\n\n        if (size.length !== 1 || size[0] !== 1) {\n          this._isScalar = false;\n        }\n      } else if (typeof arg === 'number') {\n        this._dimensions.push(_createImmutableMatrix([arg]));\n      } else if (typeof arg === 'string') {\n        // object property (arguments.count should be 1)\n        this._dimensions.push(arg);\n      } else {\n        throw new TypeError('Dimension must be an Array, Matrix, number, string, or Range');\n      } // TODO: implement support for wildcard '*'\n\n    }\n  }\n  /**\n   * Attach type information\n   */\n\n\n  Index.prototype.type = 'Index';\n  Index.prototype.isIndex = true;\n\n  function _createImmutableMatrix(arg) {\n    // loop array elements\n    for (var i = 0, l = arg.length; i < l; i++) {\n      if (typeof arg[i] !== 'number' || !isInteger(arg[i])) {\n        throw new TypeError('Index parameters must be positive integer numbers');\n      }\n    } // create matrix\n\n\n    return new ImmutableDenseMatrix(arg);\n  }\n  /**\n   * Create a clone of the index\n   * @memberof Index\n   * @return {Index} clone\n   */\n\n\n  Index.prototype.clone = function () {\n    var index = new Index();\n    index._dimensions = clone(this._dimensions);\n    index._isScalar = this._isScalar;\n    return index;\n  };\n  /**\n   * Create an index from an array with ranges/numbers\n   * @memberof Index\n   * @param {Array.<Array | number>} ranges\n   * @return {Index} index\n   * @private\n   */\n\n\n  Index.create = function (ranges) {\n    var index = new Index();\n    Index.apply(index, ranges);\n    return index;\n  };\n  /**\n   * Retrieve the size of the index, the number of elements for each dimension.\n   * @memberof Index\n   * @returns {number[]} size\n   */\n\n\n  Index.prototype.size = function () {\n    var size = [];\n\n    for (var i = 0, ii = this._dimensions.length; i < ii; i++) {\n      var d = this._dimensions[i];\n      size[i] = typeof d === 'string' ? 1 : d.size()[0];\n    }\n\n    return size;\n  };\n  /**\n   * Get the maximum value for each of the indexes ranges.\n   * @memberof Index\n   * @returns {number[]} max\n   */\n\n\n  Index.prototype.max = function () {\n    var values = [];\n\n    for (var i = 0, ii = this._dimensions.length; i < ii; i++) {\n      var range = this._dimensions[i];\n      values[i] = typeof range === 'string' ? range : range.max();\n    }\n\n    return values;\n  };\n  /**\n   * Get the minimum value for each of the indexes ranges.\n   * @memberof Index\n   * @returns {number[]} min\n   */\n\n\n  Index.prototype.min = function () {\n    var values = [];\n\n    for (var i = 0, ii = this._dimensions.length; i < ii; i++) {\n      var range = this._dimensions[i];\n      values[i] = typeof range === 'string' ? range : range.min();\n    }\n\n    return values;\n  };\n  /**\n   * Loop over each of the ranges of the index\n   * @memberof Index\n   * @param {Function} callback   Called for each range with a Range as first\n   *                              argument, the dimension as second, and the\n   *                              index object as third.\n   */\n\n\n  Index.prototype.forEach = function (callback) {\n    for (var i = 0, ii = this._dimensions.length; i < ii; i++) {\n      callback(this._dimensions[i], i, this);\n    }\n  };\n  /**\n   * Retrieve the dimension for the given index\n   * @memberof Index\n   * @param {Number} dim                  Number of the dimension\n   * @returns {Range | null} range\n   */\n\n\n  Index.prototype.dimension = function (dim) {\n    return this._dimensions[dim] || null;\n  };\n  /**\n   * Test whether this index contains an object property\n   * @returns {boolean} Returns true if the index is an object property\n   */\n\n\n  Index.prototype.isObjectProperty = function () {\n    return this._dimensions.length === 1 && typeof this._dimensions[0] === 'string';\n  };\n  /**\n   * Returns the object property name when the Index holds a single object property,\n   * else returns null\n   * @returns {string | null}\n   */\n\n\n  Index.prototype.getObjectProperty = function () {\n    return this.isObjectProperty() ? this._dimensions[0] : null;\n  };\n  /**\n   * Test whether this index contains only a single value.\n   *\n   * This is the case when the index is created with only scalar values as ranges,\n   * not for ranges resolving into a single value.\n   * @memberof Index\n   * @return {boolean} isScalar\n   */\n\n\n  Index.prototype.isScalar = function () {\n    return this._isScalar;\n  };\n  /**\n   * Expand the Index into an array.\n   * For example new Index([0,3], [2,7]) returns [[0,1,2], [2,3,4,5,6]]\n   * @memberof Index\n   * @returns {Array} array\n   */\n\n\n  Index.prototype.toArray = function () {\n    var array = [];\n\n    for (var i = 0, ii = this._dimensions.length; i < ii; i++) {\n      var dimension = this._dimensions[i];\n      array.push(typeof dimension === 'string' ? dimension : dimension.toArray());\n    }\n\n    return array;\n  };\n  /**\n   * Get the primitive value of the Index, a two dimensional array.\n   * Equivalent to Index.toArray().\n   * @memberof Index\n   * @returns {Array} array\n   */\n\n\n  Index.prototype.valueOf = Index.prototype.toArray;\n  /**\n   * Get the string representation of the index, for example '[2:6]' or '[0:2:10, 4:7, [1,2,3]]'\n   * @memberof Index\n   * @returns {String} str\n   */\n\n  Index.prototype.toString = function () {\n    var strings = [];\n\n    for (var i = 0, ii = this._dimensions.length; i < ii; i++) {\n      var dimension = this._dimensions[i];\n\n      if (typeof dimension === 'string') {\n        strings.push(JSON.stringify(dimension));\n      } else {\n        strings.push(dimension.toString());\n      }\n    }\n\n    return '[' + strings.join(', ') + ']';\n  };\n  /**\n   * Get a JSON representation of the Index\n   * @memberof Index\n   * @returns {Object} Returns a JSON object structured as:\n   *                   `{\"mathjs\": \"Index\", \"ranges\": [{\"mathjs\": \"Range\", start: 0, end: 10, step:1}, ...]}`\n   */\n\n\n  Index.prototype.toJSON = function () {\n    return {\n      mathjs: 'Index',\n      dimensions: this._dimensions\n    };\n  };\n  /**\n   * Instantiate an Index from a JSON object\n   * @memberof Index\n   * @param {Object} json A JSON object structured as:\n   *                     `{\"mathjs\": \"Index\", \"dimensions\": [{\"mathjs\": \"Range\", start: 0, end: 10, step:1}, ...]}`\n   * @return {Index}\n   */\n\n\n  Index.fromJSON = function (json) {\n    return Index.create(json.dimensions);\n  };\n\n  return Index;\n}, {\n  isClass: true\n});"]},"metadata":{},"sourceType":"module"}