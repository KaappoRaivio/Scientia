{"ast":null,"code":"import { isMatrix } from '../../utils/is';\nimport { format } from '../../utils/string';\nimport { arraySize } from '../../utils/array';\nimport { factory } from '../../utils/factory';\nvar name = 'sqrtm';\nvar dependencies = ['typed', 'abs', 'add', 'multiply', 'sqrt', 'subtract', 'inv', 'size', 'max', 'identity'];\nexport var createSqrtm = /* #__PURE__ */factory(name, dependencies, function (_ref) {\n  var typed = _ref.typed,\n      abs = _ref.abs,\n      add = _ref.add,\n      multiply = _ref.multiply,\n      sqrt = _ref.sqrt,\n      subtract = _ref.subtract,\n      inv = _ref.inv,\n      size = _ref.size,\n      max = _ref.max,\n      identity = _ref.identity;\n  /**\n   * Calculate the principal square root of a square matrix.\n   * The principal square root matrix `X` of another matrix `A` is such that `X * X = A`.\n   *\n   * https://en.wikipedia.org/wiki/Square_root_of_a_matrix\n   *\n   * Syntax:\n   *\n   *     X = math.sqrtm(A)\n   *\n   * Examples:\n   *\n   *     math.sqrtm([[1, 2], [3, 4]]) // returns [[-2, 1], [1.5, -0.5]]\n   *\n   * See also:\n   *\n   *     sqrt, pow\n   *\n   * @param  {Array | Matrix} A   The square matrix `A`\n   * @return {Array | Matrix}     The principal square root of matrix `A`\n   */\n\n  var sqrtm = typed(name, {\n    'Array | Matrix': function ArrayMatrix(A) {\n      var size = isMatrix(A) ? A.size() : arraySize(A);\n\n      switch (size.length) {\n        case 1:\n          // Single element Array | Matrix\n          if (size[0] === 1) {\n            return sqrt(A);\n          } else {\n            throw new RangeError('Matrix must be square ' + '(size: ' + format(size) + ')');\n          }\n\n        case 2:\n          {\n            // Two-dimensional Array | Matrix\n            var rows = size[0];\n            var cols = size[1];\n\n            if (rows === cols) {\n              return _denmanBeavers(A);\n            } else {\n              throw new RangeError('Matrix must be square ' + '(size: ' + format(size) + ')');\n            }\n          }\n      }\n    }\n  });\n  var _maxIterations = 1e3;\n  var _tolerance = 1e-6;\n  /**\n   * Calculate the principal square root matrix using the Denman–Beavers iterative method\n   *\n   * https://en.wikipedia.org/wiki/Square_root_of_a_matrix#By_Denman–Beavers_iteration\n   *\n   * @param  {Array | Matrix} A   The square matrix `A`\n   * @return {Array | Matrix}     The principal square root of matrix `A`\n   * @private\n   */\n\n  function _denmanBeavers(A) {\n    var error;\n    var iterations = 0;\n    var Y = A;\n    var Z = identity(size(A));\n\n    do {\n      var Yk = Y;\n      Y = multiply(0.5, add(Yk, inv(Z)));\n      Z = multiply(0.5, add(Z, inv(Yk)));\n      error = max(abs(subtract(Y, Yk)));\n\n      if (error > _tolerance && ++iterations > _maxIterations) {\n        throw new Error('computing square root of matrix: iterative method could not converge');\n      }\n    } while (error > _tolerance);\n\n    return Y;\n  }\n\n  return sqrtm;\n});","map":{"version":3,"sources":["/home/kaappo/testit/canvas/node_modules/mathjs/es/function/matrix/sqrtm.js"],"names":["isMatrix","format","arraySize","factory","name","dependencies","createSqrtm","_ref","typed","abs","add","multiply","sqrt","subtract","inv","size","max","identity","sqrtm","ArrayMatrix","A","length","RangeError","rows","cols","_denmanBeavers","_maxIterations","_tolerance","error","iterations","Y","Z","Yk","Error"],"mappings":"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","sourcesContent":["import { isMatrix } from '../../utils/is';\nimport { format } from '../../utils/string';\nimport { arraySize } from '../../utils/array';\nimport { factory } from '../../utils/factory';\nvar name = 'sqrtm';\nvar dependencies = ['typed', 'abs', 'add', 'multiply', 'sqrt', 'subtract', 'inv', 'size', 'max', 'identity'];\nexport var createSqrtm = /* #__PURE__ */factory(name, dependencies, function (_ref) {\n  var typed = _ref.typed,\n      abs = _ref.abs,\n      add = _ref.add,\n      multiply = _ref.multiply,\n      sqrt = _ref.sqrt,\n      subtract = _ref.subtract,\n      inv = _ref.inv,\n      size = _ref.size,\n      max = _ref.max,\n      identity = _ref.identity;\n\n  /**\n   * Calculate the principal square root of a square matrix.\n   * The principal square root matrix `X` of another matrix `A` is such that `X * X = A`.\n   *\n   * https://en.wikipedia.org/wiki/Square_root_of_a_matrix\n   *\n   * Syntax:\n   *\n   *     X = math.sqrtm(A)\n   *\n   * Examples:\n   *\n   *     math.sqrtm([[1, 2], [3, 4]]) // returns [[-2, 1], [1.5, -0.5]]\n   *\n   * See also:\n   *\n   *     sqrt, pow\n   *\n   * @param  {Array | Matrix} A   The square matrix `A`\n   * @return {Array | Matrix}     The principal square root of matrix `A`\n   */\n  var sqrtm = typed(name, {\n    'Array | Matrix': function ArrayMatrix(A) {\n      var size = isMatrix(A) ? A.size() : arraySize(A);\n\n      switch (size.length) {\n        case 1:\n          // Single element Array | Matrix\n          if (size[0] === 1) {\n            return sqrt(A);\n          } else {\n            throw new RangeError('Matrix must be square ' + '(size: ' + format(size) + ')');\n          }\n\n        case 2:\n          {\n            // Two-dimensional Array | Matrix\n            var rows = size[0];\n            var cols = size[1];\n\n            if (rows === cols) {\n              return _denmanBeavers(A);\n            } else {\n              throw new RangeError('Matrix must be square ' + '(size: ' + format(size) + ')');\n            }\n          }\n      }\n    }\n  });\n  var _maxIterations = 1e3;\n  var _tolerance = 1e-6;\n  /**\n   * Calculate the principal square root matrix using the Denman–Beavers iterative method\n   *\n   * https://en.wikipedia.org/wiki/Square_root_of_a_matrix#By_Denman–Beavers_iteration\n   *\n   * @param  {Array | Matrix} A   The square matrix `A`\n   * @return {Array | Matrix}     The principal square root of matrix `A`\n   * @private\n   */\n\n  function _denmanBeavers(A) {\n    var error;\n    var iterations = 0;\n    var Y = A;\n    var Z = identity(size(A));\n\n    do {\n      var Yk = Y;\n      Y = multiply(0.5, add(Yk, inv(Z)));\n      Z = multiply(0.5, add(Z, inv(Yk)));\n      error = max(abs(subtract(Y, Yk)));\n\n      if (error > _tolerance && ++iterations > _maxIterations) {\n        throw new Error('computing square root of matrix: iterative method could not converge');\n      }\n    } while (error > _tolerance);\n\n    return Y;\n  }\n\n  return sqrtm;\n});"]},"metadata":{},"sourceType":"module"}